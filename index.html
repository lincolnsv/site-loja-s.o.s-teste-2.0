<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>S.O.S Celulares - Novos e Seminovos</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    body { font-family: 'Inter', sans-serif; background: linear-gradient(to bottom, #f9fafb, #f3f4f6); }
    .scrollbar-hide::-webkit-scrollbar { display: none; }
    .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
    .modal { display: none; }
    .modal.active { display: flex; }
  </style>
</head>
<body class="text-gray-800">
  <!-- HEADER -->
  <header class="bg-white shadow sticky top-0 z-50">
    <div class="container mx-auto px-4 py-3 flex justify-between items-center">
      <h1 class="text-xl font-bold text-blue-600">S.O.S Celulares</h1>
      <nav class="hidden md:flex gap-4">
        <a href="#" class="hover:text-blue-600">Início</a>
        <a href="#produtos" class="hover:text-blue-600">Produtos</a>
        <a href="#contato" class="hover:text-blue-600">Contato</a>
      </nav>
      <button id="menuBtn" class="md:hidden text-2xl"><i class="fas fa-bars"></i></button>
    </div>
    <div id="mobileMenu" class="hidden md:hidden bg-gray-50 px-4 pb-4">
      <a href="#" class="block py-2">Início</a>
      <a href="#produtos" class="block py-2">Produtos</a>
      <a href="#contato" class="block py-2">Contato</a>
    </div>
  </header>

  <!-- BANNER -->
  <section class="bg-blue-600 text-white py-16 text-center">
    <h2 class="text-3xl font-bold mb-4">Novos e Seminovos</h2>
    <p>Encontre o celular perfeito com os melhores preços!</p>
  </section>

  <!-- PRODUTOS -->
  <section id="produtos" class="container mx-auto px-4 py-12">
    <h3 class="text-2xl font-bold mb-6">Nossos Produtos</h3>

    <!-- FILTROS -->
    <div class="flex flex-wrap gap-2 mb-6 overflow-x-auto scrollbar-hide">
      <button data-brand="all" class="filter-btn bg-blue-600 text-white px-4 py-2 rounded-full">Todos</button>
      <button data-brand="Samsung" class="filter-btn bg-gray-200 px-4 py-2 rounded-full">Samsung</button>
      <button data-brand="iPhone" class="filter-btn bg-gray-200 px-4 py-2 rounded-full">iPhone</button>
      <button data-brand="Motorola" class="filter-btn bg-gray-200 px-4 py-2 rounded-full">Motorola</button>
      <button data-brand="Xiaomi" class="filter-btn bg-gray-200 px-4 py-2 rounded-full">Xiaomi</button>
      <button data-brand="LG" class="filter-btn bg-gray-200 px-4 py-2 rounded-full">LG</button>
    </div>

    <!-- ORDENAR -->
    <div class="flex justify-end mb-4">
      <select id="sortSelect" class="border px-3 py-2 rounded">
        <option value="default">Ordenar</option>
        <option value="asc">Preço: Menor para Maior</option>
        <option value="desc">Preço: Maior para Menor</option>
      </select>
    </div>

    <!-- GRID DE PRODUTOS -->
    <div id="productsGrid" class="grid gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"></div>
    <p id="errorMsg" class="text-red-600 mt-4 hidden">Erro ao carregar produtos.</p>
  </section>

  <!-- MODAL PRODUTO -->
  <div id="productModal" class="modal fixed inset-0 bg-black bg-opacity-50 items-center justify-center p-4">
    <div class="bg-white rounded-lg max-w-lg w-full p-6 relative">
      <button id="closeModal" class="absolute top-3 right-3 text-gray-500 text-xl">&times;</button>
      <img id="modalImage" src="" alt="" class="w-full h-60 object-contain mb-4" loading="lazy"/>
      <h4 id="modalName" class="text-xl font-bold mb-2"></h4>
      <p id="modalDesc" class="text-gray-600 mb-4"></p>
      <div class="flex flex-col gap-2 mb-4">
        <span id="modalPrice" class="text-blue-600 font-bold text-lg"></span>
        <span id="modalParcelado" class="text-gray-500 text-sm"></span>
      </div>
      <div class="flex justify-end">
        <a id="modalBuy" href="#" target="_blank" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">Comprar</a>
      </div>
    </div>
  </div>

  <!-- CONTATO -->
  <section id="contato" class="bg-gray-100 py-12">
    <div class="container mx-auto px-4">
      <h3 class="text-2xl font-bold mb-4">Fale Conosco</h3>
      <p>Entre em contato pelo WhatsApp para mais informações.</p>
      <a href="https://wa.me/5564999984690" target="_blank" class="mt-4 inline-block bg-green-500 text-white px-6 py-3 rounded-full hover:bg-green-600">
        <i class="fab fa-whatsapp"></i> WhatsApp
      </a>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="bg-white shadow mt-12">
    <div class="container mx-auto px-4 py-6 text-center text-gray-500">
      &copy; 2025 S.O.S Celulares - Todos os direitos reservados.
    </div>
  </footer>

  <!-- BOTÃO TOPO -->
  <button id="scrollTopBtn" class="hidden fixed bottom-6 right-6 bg-blue-600 text-white p-3 rounded-full shadow-lg">
    <i class="fas fa-arrow-up"></i>
  </button>

  <script>
    const $ = sel => document.querySelector(sel);
    const $$ = sel => document.querySelectorAll(sel);

    // MENU MOBILE
    $('#menuBtn').addEventListener('click', ()=>$('#mobileMenu').classList.toggle('hidden'));

    // MODAL
    const modal = $('#productModal');
    const closeModalBtn = $('#closeModal');
    closeModalBtn.addEventListener('click',()=>modal.classList.remove('active'));
    modal.addEventListener('click',e=>{ if(e.target===modal) modal.classList.remove('active'); });

    // SCROLL TOP
    const scrollBtn = $('#scrollTopBtn');
    window.addEventListener('scroll',()=>{ scrollBtn.classList.toggle('hidden', window.scrollY<300); });
    scrollBtn.addEventListener('click',()=>window.scrollTo({top:0,behavior:'smooth'}));

    // PRODUTOS
    let allProducts = [], currentBrand='all';

    async function loadProducts(){
      try{
        const res = await fetch('produtos.json');
        if(!res.ok) throw new Error();
        allProducts = await res.json();
        renderProducts(allProducts);
      }catch(e){
        $('#errorMsg').classList.remove('hidden');
      }
    }

    function renderProducts(products){
      const grid=$('#productsGrid');
      grid.innerHTML='';
      if(products.length===0){ grid.innerHTML='<p>Nenhum produto encontrado.</p>'; return; }
      products.forEach(p=>{
        grid.innerHTML+=`
          <div class="bg-white rounded-lg shadow p-4 flex flex-col">
            <img src="${p.image||'https://via.placeholder.com/200'}" alt="${p.name}" class="w-full h-40 object-contain mb-2" loading="lazy"/>
            <h4 class="font-bold mb-1">${p.name}</h4>
            <p class="text-sm text-gray-500 flex-grow">${p.description||''}</p>
            <div class="mt-2">
              <span class="block text-blue-600 font-bold">${p.price?.avista || p.price || ''}</span>
              ${p.price?.parcelado ? `<span class="block text-gray-500 text-sm">${p.price.parcelado}</span>` : ""}
            </div>
            <div class="mt-3 flex justify-end">
              <button class="btn-view bg-blue-600 text-white px-3 py-1 rounded text-sm" data-id="${p.id}">
                Detalhes
              </button>
            </div>
          </div>`;
      });
      attachEvents();
    }

    function attachEvents(){
      $$('.btn-view').forEach(btn=>{
        btn.addEventListener('click',()=>{
          const id=btn.dataset.id;
          const p=allProducts.find(pr=>pr.id==id);
          if(!p) return;
          $('#modalImage').src=p.image||'https://via.placeholder.com/200';
          $('#modalName').textContent=p.name;
          $('#modalDesc').textContent=p.description||'';
          $('#modalPrice').textContent=p.price?.avista || p.price || '';
          $('#modalParcelado').textContent=p.price?.parcelado || '';
          $('#modalBuy').href=`https://wa.me/5564999984690?text=Tenho interesse no ${encodeURIComponent(p.name)}`;
          modal.classList.add('active');
        });
      });
    }

    // FILTRO
    $$('.filter-btn').forEach(btn=>{
      btn.addEventListener('click',()=>{
        $$('.filter-btn').forEach(b=>b.classList.remove('bg-blue-600','text-white'));
        btn.classList.add('bg-blue-600','text-white');
        currentBrand=btn.dataset.brand;
        applyFilters();
      });
    });

    // ORDENAR
    $('#sortSelect').addEventListener('change',applyFilters);

    function applyFilters(){
      let list=currentBrand==='all'? allProducts : allProducts.filter(p=>p.category===currentBrand);
      const sort=$('#sortSelect').value;
      if(sort==='asc') list.sort((a,b)=>parseFloat((a.price?.avista||a.price||"0").replace(/\D/g,''))-parseFloat((b.price?.avista||b.price||"0").replace(/\D/g,'')));
      if(sort==='desc') list.sort((a,b)=>parseFloat((b.price?.avista||b.price||"0").replace(/\D/g,''))-parseFloat((a.price?.avista||a.price||"0").replace(/\D/g,'')));
      renderProducts(list);
    }

    loadProducts();
  </script>
</body>
</html>
