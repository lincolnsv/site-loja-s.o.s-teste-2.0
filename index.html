<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>S.O.S Celulares - Novos e Seminovos</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    .card-hover:hover { transform: translateY(-5px); transition: .3s; }
    .modal { transition: opacity .25s ease; }
  </style>
</head>
<body class="bg-gray-100">

<!-- Header -->
<header class="bg-blue-600 text-white p-4 shadow">
  <div class="container mx-auto flex justify-between items-center">
    <h1 class="text-2xl font-bold">S.O.S Celulares</h1>
    <nav class="space-x-4">
      <a href="#novos" class="hover:underline">Novos</a>
      <a href="#seminovos" class="hover:underline">Seminovos</a>
      <a href="#acessorios" class="hover:underline">AcessÃ³rios</a>
    </nav>
  </div>
</header>

<!-- Hero -->
<section class="bg-gradient-to-r from-blue-500 to-blue-700 text-white py-16 text-center">
  <h2 class="text-4xl font-extrabold mb-4">Celulares Novos e Seminovos</h2>
  <p class="text-lg">Qualidade e garantia que vocÃª merece</p>
</section>

<!-- Produtos -->
<main class="container mx-auto p-6">
  <!-- Novos -->
  <section id="novos" class="mb-12">
    <h2 class="text-2xl font-bold text-gray-800 mb-4">ðŸ“± Novos</h2>
    <div id="catalogNovos" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
  </section>

  <!-- Seminovos -->
  <section id="seminovos" class="mb-12">
    <h2 class="text-2xl font-bold text-gray-800 mb-4">ðŸ“± Seminovos</h2>
    <div id="catalogSeminovos" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
  </section>

  <!-- AcessÃ³rios -->
  <section id="acessorios" class="mb-12">
    <h2 class="text-2xl font-bold text-gray-800 mb-4">ðŸŽ§ AcessÃ³rios</h2>
    <div id="catalogAcessorios" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
  </section>
</main>

<!-- Modal Produto -->
<div id="productModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
  <div class="bg-white rounded-lg max-w-lg w-full p-6 relative">
    <button id="closeModal" class="absolute top-2 right-2 text-gray-500 hover:text-gray-700">
      <i class="fas fa-times"></i>
    </button>
    <div id="modalContent"></div>
  </div>
</div>

<!-- Scripts -->
<script>
const $ = s => document.querySelector(s);
const $$ = s => document.querySelectorAll(s);

let allProducts = [];

// Normaliza strings para comparar categorias (remove acentos)
function normalize(str) {
  return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
}

// Renderiza produtos
function renderProducts(list){
  $('#catalogNovos').innerHTML='';
  $('#catalogSeminovos').innerHTML='';
  $('#catalogAcessorios').innerHTML='';

  if(!list.length){
    $('#catalogNovos').innerHTML='<p class="col-span-full text-center text-gray-600">Nenhum produto encontrado.</p>';
    return;
  }

  list.forEach(p=>{
    const card = document.createElement('article');
    card.className='card-hover bg-white rounded-lg overflow-hidden shadow transition';
    card.innerHTML=`
      <div class="relative h-48 bg-gray-100 flex items-center justify-center p-3">
        <img loading="lazy" src="${p.images[0]}" alt="${p.name}" class="max-h-full max-w-full object-contain" />
        <button class="absolute inset-0 flex items-center justify-center bg-black/60 text-white text-lg font-semibold opacity-0 hover:opacity-100 transition">Ver</button>
      </div>
      <div class="p-4">
        <h3 class="text-lg font-bold text-gray-800 mb-1">${p.name}</h3>
        <p class="text-gray-600 text-sm mb-2 line-clamp-3">${p.description||''}</p>
        <div class="flex items-center justify-between">
          <div class="text-blue-600 font-bold">${p.price}</div>
          <button class="btn-view bg-blue-600 text-white px-3 py-1 rounded text-sm" data-id="${p.id}">Detalhes</button>
        </div>
      </div>
    `;

    const categoria = normalize(p.category.toLowerCase());
    if(categoria === 'novo') $('#catalogNovos').appendChild(card);
    else if(categoria === 'seminovo') $('#catalogSeminovos').appendChild(card);
    else if(categoria.includes('acessorios')) $('#catalogAcessorios').appendChild(card);
  });

  // Evento botÃµes "Detalhes"
  $$('.btn-view').forEach(btn=>btn.addEventListener('click',e=>{
    const id=e.currentTarget.dataset.id;
    const prod=allProducts.find(x=>x.id==id);
    if(prod) openProductModal(prod);
  }));
}

// Modal de produto
function openProductModal(prod){
  $('#modalContent').innerHTML=`
    <h2 class="text-2xl font-bold mb-2">${prod.name}</h2>
    <img src="${prod.images[0]}" class="w-full h-64 object-contain mb-4" alt="${prod.name}">
    <p class="mb-2 text-gray-700">${prod.description||''}</p>
    <div class="text-blue-600 font-bold mb-4">${prod.price}</div>
    <button class="bg-green-600 text-white px-4 py-2 rounded w-full">
      <i class="fab fa-whatsapp"></i> Comprar via WhatsApp
    </button>
  `;
  $('#productModal').classList.remove('hidden');
  $('#productModal').classList.add('flex');
}

$('#closeModal').addEventListener('click',()=>{
  $('#productModal').classList.add('hidden');
  $('#productModal').classList.remove('flex');
});

// Carrega produtos (JSON externo)
fetch('products.json')
  .then(r=>r.json())
  .then(data=>{
    allProducts=data;
    renderProducts(allProducts);
  })
  .catch(err=>console.error("Erro ao carregar produtos:",err));
</script>

</body>
</html>
